"""App Name: Syd 10"""

import cv2
import numpy as np
import tkinter as tk
from tkinter import filedialog, messagebox
from PIL import Image, ImageTk
import os


class ImageEditor:
    def _init_(self, root):
        self.root = root
        self.root.title("Syd 10")
        self.root.geometry("850x550")

        self.image = None
        self.image_name = ""
        self.undo_stack = []
        self.redo_stack = []

        self.tk_image = None

        self.create_menu()
        self.create_ui()
        self.create_status()
        messagebox.showinfo(
            "Welcome",
            "Welcome to Syd 10!\n\nPlease open an image to start editing."
        )

    def create_menu(self):
        menu = tk.Menu(self.root)
        self.root.config(menu=menu)

        file_menu = tk.Menu(menu, tearoff=0)
        edit_menu = tk.Menu(menu, tearoff=0)

        menu.add_cascade(label="File", menu=file_menu)
        menu.add_cascade(label="Edit", menu=edit_menu)

        file_menu.add_command(label="Open", command=self.open_image)
        file_menu.add_command(label="Save", command=self.save_image)
        file_menu.add_separator()
        file_menu.add_command(label="Exit", command=self.root.quit)

        edit_menu.add_command(label="Undo", command=self.undo)
        edit_menu.add_command(label="Redo", command=self.redo)

    def create_ui(self):
        main = tk.Frame(self.root)
        main.pack(fill=tk.BOTH, expand=True)

        self.image_label = tk.Label(main, bg="gray")
        self.image_label.pack(side=tk.LEFT, fill=tk.BOTH, expand=True)

        controls = tk.Frame(main, width=220)
        controls.pack(side=tk.RIGHT, fill=tk.Y, padx=5)

        tk.Label(
            controls,
            text="Editing Tools",
            font=("Arial", 11, "bold")
        ).pack(pady=5)

        tk.Button(
            controls,
            text="Grayscale",
            command=self.grayscale
        ).pack(fill=tk.X)

        tk.Button(
            controls,
            text="Edges",
            command=self.edges
        ).pack(fill=tk.X)

        tk.Label(controls, text="Blur").pack(pady=(10, 0))
        self.blur_slider = tk.Scale(
            controls,
            from_=1,
            to=15,
            orient=tk.HORIZONTAL
        )
        self.blur_slider.set(5)
        self.blur_slider.pack(fill=tk.X)

        tk.Button(
            controls,
            text="Apply Blur",
            command=self.blur
        ).pack(fill=tk.X)

        tk.Label(controls, text="Brightness").pack(pady=(10, 0))
        self.brightness_slider = tk.Scale(
            controls,
            from_=-80,
            to=80,
            orient=tk.HORIZONTAL
        )
        self.brightness_slider.pack(fill=tk.X)

        tk.Label(controls, text="Contrast").pack(pady=(10, 0))
        self.contrast_slider = tk.Scale(
            controls,
            from_=0.5,
            to=2.0,
            resolution=0.1,
            orient=tk.HORIZONTAL
        )
        self.contrast_slider.set(1.0)
        self.contrast_slider.pack(fill=tk.X)

        tk.Button(
            controls,
            text="Enhance",
            command=self.adjust_bc
        ).pack(fill=tk.X, pady=5)

        tk.Button(
            controls,
            text="Rotate 90Â°",
            command=lambda: self.rotate(90)
        ).pack(fill=tk.X)

        tk.Button(
            controls,
            text="Flip Horizontal",
            command=self.flip
        ).pack(fill=tk.X)

        tk.Label(controls, text="Resize").pack(pady=(10, 0))
        self.resize_slider = tk.Scale(
            controls,
            from_=0.5,
            to=1.5,
            resolution=0.1,
            orient=tk.HORIZONTAL
        )
        self.resize_slider.set(1.0)
        self.resize_slider.pack(fill=tk.X)

        tk.Button(
            controls,
            text="Apply Resize",
            command=self.resize
        ).pack(fill=tk.X)
