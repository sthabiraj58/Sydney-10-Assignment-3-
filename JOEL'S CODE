def grayscale(self):
        if self.image is None:
            return
        self.push_undo()
        gray = cv2.cvtColor(self.image, cv2.COLOR_BGR2GRAY)
        self.image = cv2.cvtColor(gray, cv2.COLOR_GRAY2BGR)
        self.show_image()

    def blur(self):
        if self.image is None:
            return
        self.push_undo()
        k = self.blur_slider.get()
        if k % 2 == 0:
            k += 1
        self.image = cv2.GaussianBlur(
            self.image,
            (k, k),
            0
        )
        self.show_image()

    def edges(self):
        if self.image is None:
            return
        self.push_undo()
        gray = cv2.cvtColor(self.image, cv2.COLOR_BGR2GRAY)
        edges = cv2.Canny(gray, 100, 200)
self.image = cv2.cvtColor(
            edges,
            cv2.COLOR_GRAY2BGR
        )
        self.show_image()

    def adjust_bc(self):
        if self.image is None:
            return
        self.push_undo()
        b = self.brightness_slider.get()
        c = self.contrast_slider.get()
        img = self.image.astype(np.float32)
        img = img * c + b
        self.image = np.clip(
            img,
            0,
            255
        ).astype(np.uint8)
        self.show_image()

    def rotate(self, angle):
        if self.image is None:
            return
        self.push_undo()
        self.image = cv2.rotate(
            self.image,
            cv2.ROTATE_90_CLOCKWISE
        )
        self.show_image()

    def flip(self):
        if self.image is None:
            return
        self.push_undo()
        self.image = cv2.flip(self.image, 1)
        self.show_image()

    def resize(self):
        if self.image is None:
            return
        self.push_undo()
        scale = self.resize_slider.get()
        h, w = self.image.shape[:2]
        self.image = cv2.resize(
            self.image,
            (int(w * scale), int(h * scale))
        )
        self.show_image()


if __name__ == "__main__":
    root = tk.Tk()
    app = ImageEditor(root)
    root.mainloop()
